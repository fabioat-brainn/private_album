.scene-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100vw;
    height: 100dvh;
    position: relative;
    background-image: var(--bg-wood);
    background-size: cover;
    background-position: center;
    perspective: 2000px;
    overflow: hidden;
}

.book {
    position: relative;
    width: var(--book-width);
    height: var(--book-height);
    transform-style: preserve-3d;
    transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
    /* Closed State Default */
}

.book.open {
    /* When open, shift right by 50% so the spine (left edge) is exactly in the center of the screen */
    transform: translateX(50%);
}

/* Spine Pivot Point Logic (Unused in current DOM, removing) */
/* .book-spine-pivot { ... } */

/* The Front Cover */
.cover {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transform-origin: left;
    /* Hinge on the left */
    transform-style: preserve-3d;
    transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1);
    z-index: 10;
}

.book.open .cover {
    transform: rotateY(-180deg);
}

/* Front Cover Faces */
.cover-front,
.cover-back {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 4px 10px 10px 4px;
    z-index: 1;
    /* Ensure content is on top */
}

/* Common Background Pseudo-element setup */
.cover-front::before,
.cover-back::before,
.back-cover::before {
    content: '';
    position: absolute;
    top: -0px;
    left: -0px;
    width: calc(100%);
    height: calc(100%);
    background-size: 100% 100%;
    /* Default to exact fill */
    background-position: center;
    border-radius: inherit;
    z-index: -1;
}

.cover-front::before {
    background-image: var(--bg-leather);
    transform: scaleX(-1);
    /* Mirror the cover texture */
    box-shadow: inset 10px 0 20px rgba(0, 0, 0, 0.5), 5px 10px 20px rgba(0, 0, 0, 0.4);
    /* Keep 100% size for the new clean cover image */
}

/* Specific zoom for pages to handle their white borders */
.cover-back::before,
.back-cover::before {
    background-size: 110% 112%;
}

.cover-front {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background-color: transparent !important;
    /* Ensure no white box behind */
    overflow: visible;
}

.cover-back {
    transform: rotateY(180deg);
    background-color: transparent !important;
    overflow: visible;
}

.cover-back::before {
    background-image: var(--bg-paper);
    box-shadow: inset -10px 0 20px rgba(0, 0, 0, 0.2);
}

/* The rest of the book (Right side pages + Back Cover) */
/* The rest of the book (Right side pages + Back Cover) */
/* .back-cover rule merged primarily into the one below */

/* Page Face & Texture Logic for Turnable Pages */
.page-face {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
    background-color: transparent !important;
}

.texture-layer {
    position: absolute;
    top: -5px;
    left: -5px;
    width: calc(100% + 10px);
    height: calc(100% + 10px);
    background-size: 110% 112%;
    background-position: center;
    border-radius: inherit;
    z-index: -1;
    pointer-events: none;
    background-image: var(--bg-paper);
}

/* Specific shadow for left/right Pages to simulate depth/spine curve */
.page-face.front .texture-layer {
    box-shadow: inset 15px 0 20px rgba(0, 0, 0, 0.1);
    /* Spin shadow left */
}

.page-face.back .texture-layer {
    box-shadow: inset -15px 0 20px rgba(0, 0, 0, 0.1);
    /* Sping shadow right */
}

/* Original Back Cover Logic - kept for the very last page base */
.back-cover {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 4px 10px 10px 4px;
    box-shadow: 10px 10px 30px rgba(0, 0, 0, 0.5);
    z-index: 0;
    /* Base */
    background-color: transparent !important;
    overflow: visible;
}

/* Page Face & Texture Logic for Turnable Pages */
.page-face {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
    background-color: transparent !important;
}

.texture-layer {
    position: absolute;
    top: -5px;
    left: -5px;
    width: calc(100% + 10px);
    height: calc(100% + 10px);
    background-size: 110% 112%;
    background-position: center;
    border-radius: inherit;
    z-index: -1;
    pointer-events: none;
    background-image: var(--bg-paper);
}

/* Specific shadow for left/right Pages to simulate depth/spine curve */
.page-face.front .texture-layer {
    box-shadow: inset 15px 0 20px rgba(0, 0, 0, 0.1);
    /* Spin shadow left */
}

.page-face.back .texture-layer {
    box-shadow: inset -15px 0 20px rgba(0, 0, 0, 0.1);
    /* Sping shadow right */
}

/* Original Back Cover Logic - kept for the very last page base */
.back-cover {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 4px 10px 10px 4px;
    box-shadow: 10px 10px 30px rgba(0, 0, 0, 0.5);
    z-index: 0;
    /* Base */
    background-color: transparent !important;
    overflow: visible;
}

.back-cover::before {
    background-image: var(--bg-paper);
}

.cover-back,
.back-cover {
    /* Removed clip-path (torn edge) as requested */
}

/* Book edge/thickness simulation could be added here */

/* Responsive Mobile */
/* --- MOBILE NOTEBOOK STYLES --- */
@media (max-width: 768px) {
    :root {
        --book-width: 90vw;
        --book-height: 70vh;
        /* Adjust aspect for notebook */
    }

    /* Reset interactions for mobile vertical */
    .book.mobile-notebook {
        /* Center perfectly */
        transform: none !important;
    }

    .book.mobile-notebook.open {
        transform: none !important;
    }

    /* Redefine cover transform for mobile */
    .book.mobile-notebook .cover {
        transform-origin: top;
        /* When open, it flips UP (-180 around X) */
    }

    .book.mobile-notebook.open .cover {
        transform: rotateX(180deg);
        opacity: 0;
        pointer-events: none;
    }

    /* Cover Back Face must also rotate properly */
    .book.mobile-notebook .cover-back {
        transform: rotateX(180deg) rotateY(0deg);
        opacity: 0;
    }

    /* Spiral Binding */
    .spiral-binding {
        position: absolute;
        top: -20px;
        left: 0;
        width: 100%;
        height: 40px;
        display: flex;
        justify-content: space-evenly;
        z-index: 200;
        pointer-events: none;
    }

    .spiral-ring {
        width: 10px;
        height: 30px;
        background: radial-gradient(circle at 30% 30%, #ddd, #999);
        border-radius: 5px;
        box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        transform: skewX(-10deg);
        position: absolute;
        top: 0;
    }

    /* Adjust page textures for top binding shadow */
    .book.mobile-notebook .page-face.front .texture-layer {
        box-shadow: inset 0 15px 20px rgba(0, 0, 0, 0.15);
        /* Top shadow */
    }

    /* Hide the "Back" page content (Top page) on mobile */
    .book.mobile-notebook .page-face.back {
        opacity: 0;
        pointer-events: none;
    }

    /* Ensure opacity transitions are safe */
    .book.mobile-notebook.open .cover {
        opacity: 0 !important;
    }
}
}

.passcode-input::placeholder {
    color: rgba(255, 255, 255, 0.7);
    font-style: italic;
}

/* Page Face & Texture Logic for Turnable Pages */
.page-face {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;
    background-color: transparent !important;
}

.texture-layer {
    position: absolute;
    top: -5px;
    left: -5px;
    width: calc(100% + 10px);
    height: calc(100% + 10px);
    background-size: 110% 112%;
    background-position: center;
    border-radius: inherit;
    z-index: -1;
    pointer-events: none;
    background-image: var(--bg-paper);
}

/* Specific shadow for left/right Pages to simulate depth/spine curve */
.page-face.front .texture-layer {
    box-shadow: inset 15px 0 20px rgba(0, 0, 0, 0.1);
    /* Spin shadow left */
}

.page-face.back .texture-layer {
    box-shadow: inset -15px 0 20px rgba(0, 0, 0, 0.1);
    /* Sping shadow right */
}